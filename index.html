<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Slot Machine</title>


  <!-- Custom styles for this template -->
  <link href="style.css" rel="stylesheet">


  </head>

<body>

<div class="container">
		<div class="machine-main-container">
			<div class="machine-top">
			</div>
			<div class="machine-center">
				
					<div class="slot-one-cont">
						<ul class="slot-one">
							<li><img src="images/result-1.jpg" class="result"></li>
							<li><img src="images/result-2.jpg" class="result"></li>
							<li><img src="images/result-3.jpg" class="result"></li>
							<li><img src="images/result-4.jpg" class="result"></li>
							<li><img src="images/result-5.jpg" class="result"></li>
							<li><img src="images/result-6.jpg" class="result"></li>
							<li><img src="images/result-7.jpg" class="result"></li>
							<li><img src="images/result-8.jpg" class="result"></li>
						</ul>
					</div>
					<div class="slot-two-cont">
						<ul class="slot-two">
							<li><img src="images/result-1.jpg" class="result"></li>
							<li><img src="images/result-2.jpg" class="result"></li>
							<li><img src="images/result-3.jpg" class="result"></li>
							<li><img src="images/result-4.jpg" class="result"></li>
							<li><img src="images/result-5.jpg" class="result"></li>
							<li><img src="images/result-6.jpg" class="result"></li>
							<li><img src="images/result-7.jpg" class="result"></li>
							<li><img src="images/result-8.jpg" class="result"></li>
						</ul>
					</div>
					<div class="slot-three-cont">
						<ul class="slot-three">
							<li><img src="images/result-1.jpg" class="result"></li>
							<li><img src="images/result-2.jpg" class="result"></li>
							<li><img src="images/result-3.jpg" class="result"></li>
							<li><img src="images/result-4.jpg" class="result"></li>
							<li><img src="images/result-5.jpg" class="result"></li>
							<li><img src="images/result-6.jpg" class="result"></li>
							<li><img src="images/result-7.jpg" class="result"></li>
							<li><img src="images/result-8.jpg" class="result"></li>
						</ul>
					</div>
			
			</div>
			<div class="machine-bottom">
			</div>
		</div>
		
		<div class="machine-side">
			<button class="lever-btn">
					<div class="lever-design">
						<h4 class="lever-label">Play</h4>
					</div>
			</button>
			<div class="lever-hole-design">
			</div>
		</div>
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  

<script>
var spinnerSlotOneResult = 0;
var spinnerSlotTwoResult = 0;



$('.lever-btn').on('click', function()
{
	spinnerSlotOneResult = 0;//reset
	spinnerSlotTwoResult = 0;//reset
	spinnerSlotThreeResult = 0;//reset

	
	resetSlots();
	//GrandWin();
	//lose();
	major();

	 $(this).animate({top: '+=450px'}, 500);
	$(this).animate({top: '-=450px'}, 1000);
});

function spinner(whichSlot,durationPerResult,maxSpinTimes,randomResult)
{

	var randomSpeed = Math.floor(Math.random() * 50) + 100;

	var currentResult = 1;
	var Allowednumberofspins = Math.floor(Math.random() * maxSpinTimes) + 2;
	var numberofspinscounter = 1;

	 var myVar =  setInterval(function()
   {


	  currentResult++;
		
	  $(whichSlot).animate({marginTop:-166.65},randomSpeed,function()
	  {
		 $(this).css({marginTop:0}).find("li:last").after($(this).find("li:first"));
	  })
	  
	 
	  if(currentResult%8 == 0)
	  {
		currentResult = 8;
		numberofspinscounter++;
		
	  }
	  else
	  {
		currentResult = currentResult%8;
	  }
	  
			if(currentResult == randomResult && numberofspinscounter >= Allowednumberofspins)
		  {
			clearInterval(myVar);
		  }
		

		
	  
   }, durationPerResult);
	
	
}

function lose()
{

var arr = []
while(arr.length < 3){
  var randomnumber=Math.ceil(Math.random()*8)
  var found=false;
  for(var i=0;i<arr.length;i++){
	if(arr[i]==randomnumber){found=true;break}
  }
  if(!found)arr[arr.length]=randomnumber;
}


spinner("ul.slot-one",0,3,arr[0]);
	setTimeout(function()
	{
		spinner("ul.slot-two",100,4,arr[1]);
	}, 800);
	
	setTimeout(function()
	{

		spinner("ul.slot-three",120,5,arr[2]);
	}, 1200);

}

function major()
{

var arr = []
while(arr.length < 3){
  var randomnumber=Math.ceil(Math.random()*7)
  var found=false;
  for(var i=0;i<arr.length;i++){
	if(arr[i]==randomnumber){found=true;break}
  }
  if(!found)arr[arr.length]=randomnumber;
}


spinner("ul.slot-one",0,3,arr[0]);
	setTimeout(function()
	{
		spinner("ul.slot-two",100,4,arr[0]);
	}, 800);
	
	setTimeout(function()
	{

		spinner("ul.slot-three",120,5,arr[0]);
	}, 1200);
}

function GrandWin()
{
	//GrandWinSpinner("ul.slot-one",0,3);
	spinner("ul.slot-one",0,3,8);
	
	
	setTimeout(function()
	{
		//GrandWinSpinner("ul.slot-two",100,4);
		spinner("ul.slot-two",100,4,8);
	}, 800);
	
	setTimeout(function()
	{

		//GrandWinSpinner("ul.slot-three",120,7);
		spinner("ul.slot-three",100,4,8);
	}, 1200);
	


	
}

function resetSlots()
{
  $('ul.slot-one , ul.slot-two , ul.slot-three').empty();
  $('ul.slot-one , ul.slot-two , ul.slot-three').append('<li><img src="images/result-1.jpg" class="result"></li><li><img src="images/result-2.jpg" class="result"></li><li><img src="images/result-3.jpg" class="result"></li><li><img src="images/result-4.jpg" class="result"></li><li><img src="images/result-5.jpg" class="result"></li><li><img src="images/result-6.jpg" class="result"></li><li><img src="images/result-7.jpg" class="result"></li><li><img src="images/result-8.jpg" class="result"></li>')
  
}


	


</script>
  
</body>

</html>